import{r as t,j as i,g as k,h as K}from"./index-BiqykqQm.js";import{u as F,f as S,M as U,a as L,P as B,L as D,m as z}from"./Menu-V4DtvEB3.js";function I(){const n=t.useRef(!1);return F(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function T(){const n=I(),[o,e]=t.useState(0),s=t.useCallback(()=>{n.current&&e(o+1)},[o]);return[t.useCallback(()=>S.postRender(s),[s]),o]}class G extends t.Component{getSnapshotBeforeUpdate(o){const e=this.props.childRef.current;if(e&&o.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function H({children:n,isPresent:o}){const e=t.useId(),s=t.useRef(null),p=t.useRef({width:0,height:0,top:0,left:0}),{nonce:f}=t.useContext(U);return t.useInsertionEffect(()=>{const{width:d,height:a,top:x,left:h}=p.current;if(o||!s.current||!d||!a)return;s.current.dataset.motionPopId=e;const r=document.createElement("style");return f&&(r.nonce=f),document.head.appendChild(r),r.sheet&&r.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${a}px !important;
            top: ${x}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(r)}},[o]),i.jsx(G,{isPresent:o,childRef:s,sizeRef:p,children:t.cloneElement(n,{ref:s})})}const v=({children:n,initial:o,isPresent:e,onExitComplete:s,custom:p,presenceAffectsLayout:f,mode:d})=>{const a=L(V),x=t.useId(),h=t.useMemo(()=>({id:x,initial:o,isPresent:e,custom:p,onExitComplete:r=>{a.set(r,!0);for(const u of a.values())if(!u)return;s&&s()},register:r=>(a.set(r,!1),()=>a.delete(r))}),f?[Math.random()]:[e]);return t.useMemo(()=>{a.forEach((r,u)=>a.set(u,!1))},[e]),t.useEffect(()=>{!e&&!a.size&&s&&s()},[e]),d==="popLayout"&&(n=i.jsx(H,{isPresent:e,children:n})),i.jsx(B.Provider,{value:h,children:n})};function V(){return new Map}function W(n){return t.useEffect(()=>()=>n(),[])}const m=n=>n.key||"";function _(n,o){n.forEach(e=>{const s=m(e);o.set(s,e)})}function q(n){const o=[];return t.Children.forEach(n,e=>{t.isValidElement(e)&&o.push(e)}),o}const A=({children:n,custom:o,initial:e=!0,onExitComplete:s,exitBeforeEnter:p,presenceAffectsLayout:f=!0,mode:d="sync"})=>{const a=t.useContext(D).forceRender||T()[0],x=I(),h=q(n);let r=h;const u=t.useRef(new Map).current,j=t.useRef(r),C=t.useRef(new Map).current,E=t.useRef(!0);if(F(()=>{E.current=!1,_(h,C),j.current=r}),W(()=>{E.current=!0,C.clear(),u.clear()}),E.current)return i.jsx(i.Fragment,{children:r.map(c=>i.jsx(v,{isPresent:!0,initial:e?void 0:!1,presenceAffectsLayout:f,mode:d,children:c},m(c)))});r=[...r];const y=j.current.map(m),M=h.map(m),N=y.length;for(let c=0;c<N;c++){const l=y[c];M.indexOf(l)===-1&&!u.has(l)&&u.set(l,void 0)}return d==="wait"&&u.size&&(r=[]),u.forEach((c,l)=>{if(M.indexOf(l)!==-1)return;const w=C.get(l);if(!w)return;const O=y.indexOf(l);let g=c;if(!g){const $=()=>{u.delete(l);const P=Array.from(C.keys()).filter(R=>!M.includes(R));if(P.forEach(R=>C.delete(R)),j.current=h.filter(R=>{const b=m(R);return b===l||P.includes(b)}),!u.size){if(x.current===!1)return;a(),s&&s()}};g=i.jsx(v,{isPresent:!1,onExitComplete:$,custom:o,presenceAffectsLayout:f,mode:d,children:w},m(w)),u.set(l,g)}r.splice(O,0,g)}),r=r.map(c=>{const l=c.key;return u.has(l)?c:i.jsx(v,{isPresent:!0,presenceAffectsLayout:f,mode:d,children:c},m(c))}),i.jsx(i.Fragment,{children:u.size?r:r.map(c=>t.cloneElement(c))})},X=({title:n,items:o})=>{const[e,s]=t.useState(!1),p=()=>{s(!e)};return i.jsxs(z.section,{className:"menu-section",children:[i.jsxs("button",{onClick:p,className:`section-button ${e?"open":""}`,children:[i.jsx("span",{className:"button-text",children:n}),e?i.jsx(k,{className:"button-icon"}):i.jsx(K,{className:"button-icon"})]}),i.jsx(A,{initial:!1,children:e&&i.jsx(z.ul,{className:"section-content",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:o.map((f,d)=>i.jsxs("li",{children:[f.name," - ",f.price]},d))})})]})};export{X as default};
